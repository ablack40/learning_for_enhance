# 装饰器模式 - 参考答案

- [返回题目](./questions.md) | [返回目录](../README.md)
- 关联模式： [代理](../05-代理模式/questions.md)、[模板方法](../08-模板方法模式/questions.md)

## 1) 定义
在不改变原对象接口的前提下，动态地为对象增加额外职责。

## 2) 比继承灵活的原因
继承是编译期固定；装饰器是运行期按需组合，避免子类爆炸。

## 3) 与代理区别
装饰器关注“增强功能”；代理关注“控制访问”。

## 4) 叠加顺序控制
通过装配顺序决定调用链，建议在配置层统一组装并固定顺序规则。

## 5) I/O 流体现
如“基础流 + 缓冲装饰 + 编码装饰”，每层只做一件增强。

## 6) 层级过深治理
- 限制装饰层数。
- 合并高耦合装饰。
- 通过链路日志可视化调用顺序。

## 7) 是否适合核心规则
适合“可插拔非核心能力”；核心业务决策更适合策略/规则引擎。

## 8) 设计建议
为每个装饰器定义单一职责（如计时、审计、指标上报），并统一接口与上下文对象。

## 知识点速记
- 核心：动态增强。
- 高风险点：装饰链太深导致定位困难。

```mermaid
flowchart LR
    C[Client] --> D3[Decorator3]
    D3 --> D2[Decorator2]
    D2 --> D1[Decorator1]
    D1 --> Core[ConcreteComponent]
```
